<!DOCTYPE html>
<html>
<head>
  <title>Recipe Details</title>
  <!-- Add your CSS and JavaScript links here -->
</head>
<body>

  <h1><%= @recipe.name %></h1>

  <h4>Preparation Time: <%= @recipe.preparation_time.to_i %> minutes</h4>
  <h4>Cooking Time: <%= @recipe.cooking_time.to_i %> minutes</h4>

  <p><%= @recipe.description %></p>

  <h4>Public: <%= @recipe.public.to_s %></h4>

  <%= button_to "Generate Shopping List" %>

  <% if current_user == @recipe.user %>
    <%= button_to "Add ingredient", new_user_recipe_food_path(recipe_id: @recipe.id), method: :get, class: "btn" %>
    <%= button_to "Toggle Public", toggle_user_recipe_path(user_id: current_user.id, id: @recipe.id), method: :patch, class: "btn toggle-public-btn" %>
  <% end %>

  <hr />

  <% if @user.foods.empty? %>
    <p>No food ingredients yet</p>
  <% else %>
    <table class="foodTable">
      <thead>
        <tr>
          <th>Food</th>
          <th>Quantity</th>
          <th>Value</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <% @recipe_foods.each do |recipe| %>
          <tr>
            <td><%= recipe.food.name %></td>
            <td><%= recipe.quantity %></td>
            <td>$<%= recipe.food.price * recipe.quantity %></td>
            <td>
              <%= button_to "Modify" %>
              <td><%= button_to "Delete ingredient", user_recipe_food_path(id: recipe.id), method: :delete, class: "btn"  %></td>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  <% end %>
</body>
</html>
